# Contributor: artist for Artix Linux

pkgname=xlibre-xf86-video-siliconmotion
_pkgname=xf86-video-siliconmotion
pkgver=1.7.10.2
pkgrel=1
pkgdesc="XLibre fork of X.org siliconmotion video driver"
arch=(x86_64 aarch64)
url="https://github.com/X11Libre"
license=('custom')
depends=('glibc')
makedepends=('xlibre-xserver' 'xlibre-xserver-common' 'xlibre-xserver-devel' 'X-ABI-VIDEODRV_VERSION=28.0')
groups=('xlibre-drivers')
source=("${url}/${_pkgname}/archive/refs/tags/${pkgname}-${pkgver}.tar.gz")
sha256sums=('7cc379d555cd2f2959575742eee305f17727b88732eba0e7d443dc25da27cb4d')

build() {
  cd ${_pkgname}-${pkgname}-${pkgver}
  ./autogen.sh
  ./configure --prefix=/usr
  make
}

package() {
  cd ${_pkgname}-${pkgname}-${pkgver}
  make DESTDIR="${pkgdir}" install
  install -m755 -d "${pkgdir}/usr/share/licenses/${pkgname}"
  install -m644 COPYING "${pkgdir}/usr/share/licenses/${pkgname}/"
}

